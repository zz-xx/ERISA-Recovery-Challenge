/* 
These styles complement pico's layout options. We embrace pico instead of fighting it.
Core idea is to only customize where necessary. For rest of it pico's default styles to keep it simple.
*/

:root {
    --pico-font-family: "Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
}

/* --- Reusable Layout & Text Utilities --- */
.text-success {
    color: #28a745;
}

.text-danger {
    color: #dc3545;
}

.text-center {
    text-align: center;
}

.text-muted {
    color: var(--pico-muted-color);
}

.form-error {
    color: var(--pico-form-element-invalid-color);
}

.d-flex {
    display: flex;
}

.align-items-center {
    align-items: center;
}

.justify-content-between {
    justify-content: space-between;
}

.gap-half {
    gap: 0.5rem;
}

.gap-1 {
    gap: 0.75rem;
}

.m-0 {
    margin: 0;
}

/* --- App-Specific Components --- */

.theme-toggle-btn {
    padding: 0.7rem;
    /* Matches vertical padding of logout btn for alignment */
    line-height: 0;
    /* for vertically centering the SVG inside */
}

.nav-actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.nav-actions form {
    margin: 0;
}

.nav-actions .logout-btn {
    padding: 0.5rem 1rem;
    margin: 0;
}

.login-card {
    max-width: 30rem;
    margin: 4rem auto;
}

/* --- Filter Form --- */
.filter-container {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: flex-end;
    margin-bottom: 1.5rem;
}

.filter-container .search-field {
    flex-grow: 1;
    /* This makes the search bar take up the empty space */
}

.filter-container .controls {
    display: flex;
    gap: 1rem;
}

.filter-container input,
.filter-container select,
.filter-container label {
    margin-bottom: 0;
    /* Normalizes vertical alignment */
}

#flagged-filter {
    display: none;
}

.status-select-wrapper {
    position: relative;
}

.status-select-wrapper svg {
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    color: var(--pico-muted-color);
}

.status-select-wrapper select {
    padding-left: 2.25rem;
}

/* --- Table Enhancements --- */

/* Dark Mode Table Row Hover */
/* This rule ONLY applies when the data-theme is 'dark' */
html[data-theme="dark"] tbody tr:not(.inserted-detail-row):hover {
    --pico-background-color: rgba(255, 255, 255, 0.07);
}

table thead th {
    /* Use Pico's primary color variable for the background */
    background-color: var(--pico-primary);
    /* Use Pico's inverse color variable (white in this case) for the text */
    color: var(--pico-primary-inverse);
}

/* links within the header also use the correct inverse color */
table thead th a {
    color: var(--pico-primary-inverse);
}

.table-container {
    overflow-x: auto;
}

tbody tr:not(.inserted-detail-row):hover {
    --pico-background-color: rgb(239 246 255 / 0.75);
}

.claim-id-link {
    font-family: "Fira Mono", monospace;
    color: var(--pico-secondary);
}

.actions-cell {
    display: flex;
    gap: 0.5rem;
}

.table-empty-state {
    text-align: center;
    padding: 3rem;
}

/* --- Detail View & Notes --- */
.detail-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/* --- Component Styles (Badges, Buttons, etc.) --- */
.status-badge {
    /* Flexbox properties for perfect centering */
    display: inline-flex;
    align-items: center;
    justify-content: center;

    /* Responsive, uniform width */
    min-width: 7.5rem;
    /* ~120px, but scales with user font size */

    /* Original styling for the bubble appearance */
    padding: 0.4em 0.9em;
    font-size: 0.8rem;
    font-weight: 600;
    border-radius: 0.375rem;
    color: #fff;
}

.status-paid {
    background-color: #28a745;
}

.status-denied {
    background-color: #dc3545;
}

.status-under-review {
    background-color: rgba(30, 64, 175, 0.600);
}

.action-btn {
    background: none;
    border: none;
    padding: 0.2rem;
    cursor: pointer;
    line-height: 0;
}

.action-btn svg {
    width: 20px;
    height: 20px;
    stroke: var(--pico-muted-color);
    stroke-width: 1.5;
    fill: none;
}

.action-btn:hover svg {
    stroke: var(--pico-primary-hover);
}

.action-btn.flag-btn svg {
    stroke: #dc3545;
}

.action-btn.flag-btn.flagged svg {
    fill: #dc3545;
    stroke: #dc3545;
}

label[for="flagged-filter"] {
    background-color: var(--pico-primary);
    /* A light grey background */
    border-color: var(--pico-primary-border);
    color: var(--pico-primary-inverse);
    /* A dark grey text */
}

label[for="flagged-filter"]:hover {
    background-color: var(--pico-primary-hover);
}

#flagged-filter:checked+label {
    background-color: transparent;
    border-color: var(--pico-primary-border);
    color: var(--pico-primary);
}

#flagged-filter:checked+label svg {
    fill: #dc3545;
    stroke: #dc3545;
}

/* --- Detail view styling --- */

.inserted-detail-row-td {
    padding: 1.5rem;
}

.add-note-form {
    margin-bottom: 2rem;
}

.detail-grid {
    --pico-grid-spacing-horizontal: 2rem;
    align-items: flex-start;
}

.detail-card {
    padding: 1.5rem;
    border: 1px solid var(--pico-card-border-color);
    border-radius: var(--pico-card-border-radius);
    background-color: var(--pico-card-background-color);
}

.detail-card .grid {
    margin-bottom: 1.5rem;
}

.detail-card .grid:last-child {
    margin-bottom: 0;
}

.detail-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--pico-card-border-color);
}

.detail-header h5 {
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.detail-metric {
    /* margin-bottom: 1.5rem; */
}

.detail-metric label {
    color: var(--pico-muted-color);
    margin-bottom: 0.25rem;
}

.detail-metric p {
    font-size: 1.75rem;
    font-weight: 600;
    margin: 0;
}

.cpt-codes-container label {
    color: var(--pico-muted-color);
    display: block;
    /* margin-bottom: 0.5rem; */
}

.cpt-code-tag {
    display: inline-block;
    background-color: var(--pico-muted-background-color);
    padding: 0.25rem 0.75rem;
    border-radius: var(--pico-border-radius);
    font-family: var(--pico-font-family-monospace);
    margin-right: 0.5rem;
    /* margin-bottom: 0.5rem; */
    font-size: 0.9rem;
    /* create the box effect */
    border: 1px solid var(--pico-muted-border-color);
}

.denial-reason {
    color: var(--pico-form-element-invalid-color);
    font-weight: 600;
}

.quick-actions ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.quick-actions li {
    margin-bottom: 0.5rem;
}

.quick-actions a,
.quick-actions button {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    justify-content: flex-start;
}

/* --- Responsive Navigation --- */
/* This block only applies to screens 768px wide or smaller */
@media (max-width: 768px) {
    nav {
        /* Stack the brand and the user actions vertically */
        flex-direction: column;
        /* Smaller gap between the title and user actions */
        gap: 0.5rem;
    }

    /* NEW: Styles for the main title on mobile */
    nav h2 {
        /* Make the title font smaller */
        font-size: 1.5rem;
        /* Remove the default bottom margin from the heading */
        margin: 0;
    }

    nav ul {
        /* Ensure the user actions don't have extra margin */
        margin-bottom: 0;
    }
}
